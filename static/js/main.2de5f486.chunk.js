(this.webpackJsonpsamurai=this.webpackJsonpsamurai||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return i}));var r=n(50),s=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"dd304e28-3d68-4d00-a172-a57bb7d47656"}}),a={getUsers:function(t,e){return s.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},follow:function(t){return s.post("follow/".concat(t))},unfollow:function(t){return s.delete("follow/".concat(t))},getProfile:function(t){return console.warn("Obsolete method. Please use profileAPI object"),c.getProfile(t)}},c={getProfile:function(t){return s.get("profile/".concat(t))},getStatus:function(t){return s.get("profile/status/".concat(t))},updateStatus:function(t){return s.put("profile/status",{status:t})}},i={getMe:function(){return s.get("auth/me")},login:function(t,e,n){return s.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return s.delete("auth/login")}}},21:function(t,e,n){t.exports={navbar:"Navbar_navbar__2Jmdd",activeLink:"Navbar_activeLink__Msj5u"}},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(0);var r=n.p+"static/media/preloader.f05770b4.svg",s=n(1),a=function(){return Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:r,alt:"preloader"})})}},31:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));var r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(e,n){return e||n(t)}),void 0)}},s=function(t){return function(e){return e&&e.length>t?"Max length is ".concat(t," symbols"):void 0}}},35:function(t,e,n){t.exports={avatar:"Post_avatar__t7JUp",post:"Post_post__qfkGF"}},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(3),s=n(55),a=(n(0),n(5)),c=n(9),i=n(1),u=function(t){return{isAuth:t.auth.isAuth}};function o(t){return Object(c.b)(u)((function(e){var n=e.isAuth,c=Object(s.a)(e,["isAuth"]);return n?Object(i.jsx)(t,Object(r.a)({},c)):Object(i.jsx)(a.a,{to:"/login"})}))}},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u}));var r=n(22),s=n(3),a="dialogs/SEND-MESSAGE",c={dialogs:[{id:1,name:"Mark"},{id:2,name:"Ivan"},{id:3,name:"Issac"},{id:4,name:"Robert"},{id:5,name:"Arthur"}],messages:[{id:1,message:"My name is Mark"},{id:2,message:"My name is Ivan"},{id:3,message:"My name is Issac"},{id:4,message:"My name is Robert"},{id:5,message:"My name is Arthur"}]},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:return Object(s.a)(Object(s.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:Math.random(),message:e.message}])});default:return t}},u=function(t){return{type:a,message:t}}},48:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(3),s=(n(0),n(1)),a=function(t){var e=t.input,n=t.meta,a=t.props;return Object(s.jsxs)("div",{children:[Object(s.jsx)("textarea",Object(r.a)(Object(r.a)({},e),a)),n.touched&&n.error&&Object(s.jsx)("span",{children:n.error})]})}},49:function(t,e,n){"use strict";n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return w})),n.d(e,"b",(function(){return S})),n.d(e,"a",(function(){return k})),n.d(e,"e",(function(){return _}));var r=n(4),s=n.n(r),a=n(7),c=n(22),i=n(3),u=n(10),o=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(i.a)(Object(i.a)({},t),r):t}))},d="users/FOLLOW",l="users/UNFOLLOW",f="users/SET_USERS",p="users/SET_CURRENT_PAGE",j="users/SET_TOTAL_USERS_COUNT",b="users/TOGGLE_IS_FETCHING",h="users/TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!0})});case l:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!1})});case f:return Object(i.a)(Object(i.a)({},t),{},{users:Object(c.a)(e.users)});case p:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case j:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.count});case b:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case h:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(c.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}},g=function(t){return{type:d,userId:t}},m=function(t){return{type:l,userId:t}},x=function(t){return{type:p,currentPage:t}},y=function(t){return{type:b,isFetching:t}},w=function(t,e){return{type:h,isFetching:t,userId:e}},S=function(t,e){return function(){var n=Object(a.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(y(!0)),n.next=3,u.c.getUsers(t,e);case 3:a=n.sent,r(y(!1)),r((c=a.items,{type:f,users:c})),r((s=a.totalCount,{type:j,count:s})),r(x(t));case 8:case"end":return n.stop()}var s,c}),n)})));return function(t){return n.apply(this,arguments)}}()},P=function(){var t=Object(a.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(n);case 2:0===t.sent.data.resultCode&&e(a(n)),e(w(!1,n));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,s){return t.apply(this,arguments)}}(),k=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.c.follow.bind(u.c),e.next=3,P(n,t,r,g);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.c.unfollow.bind(u.c),e.next=3,P(n,t,r,m);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},53:function(t,e,n){t.exports={header:"Header_header__3nLLi"}},54:function(t,e,n){t.exports={btn:"MyPosts_btn__2aPY-",btnClose:"MyPosts_btnClose__3MtkO"}},57:function(t,e,n){},84:function(t,e,n){},87:function(t,e,n){"use strict";n.r(e);var r=n(0),s=n.n(r),a=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,92)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),r(t),s(t),a(t),c(t)}))},c=(n(57),n(15)),i=n(4),u=n.n(i),o=n(7),d=n(22),l=n(3),f=n(10),p="profile/ADD_POST",j="profile/DELETE_POST",b="profile/SET_USER_PROFILE",h="profile/SET_STATUS",O={posts:[{id:1,post:"My first post",likes:1},{id:2,post:"My second post",likes:2},{id:3,post:"My third post",likes:3},{id:4,post:"My fourth post",likes:4},{id:5,post:"My fifth post",likes:5}],profile:null,status:""},v=function(t){return{type:h,status:t}},g=n(46),m=n(49),x="auth/SET_USER_DATA",y="auth/SET_AUTH_ERROR",w="auth/CLEAR_AUTH_ERROR",S={userId:null,email:null,login:null,isAuth:!1,authError:{status:!1,messages:[]}},P=function(t,e,n,r){return{type:x,payload:{userId:t,email:e,login:n,isAuth:r}}},k=function(){return{type:w}},_=function(){return function(){var t=Object(o.a)(u.a.mark((function t(e){var n,r,s,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.getMe();case 2:0===(n=t.sent).data.resultCode&&(r=n.data.data,s=r.id,a=r.email,c=r.login,e(P(s,a,c,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=n(51),A="app/APP_IS_INITIALIZED",I={initialized:!1},M=Object(c.c)({profilePage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return Object(l.a)(Object(l.a)({},t),{},{posts:[].concat(Object(d.a)(t.posts),[{id:6,post:e.newPostText,likes:0}])});case j:return Object(l.a)(Object(l.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.postId}))});case b:return Object(l.a)(Object(l.a)({},t),{},{profile:e.profile});case h:return Object(l.a)(Object(l.a)({},t),{},{status:e.status});default:return t}},dialogsPage:g.a,usersPage:m.f,auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case x:return Object(l.a)(Object(l.a)({},t),e.payload);case y:return Object(l.a)(Object(l.a)(Object(l.a)({},t),t.authError),{},{authError:{status:!0,messages:e.errorMessages}});case w:return Object(l.a)(Object(l.a)(Object(l.a)({},t),t.authError),{},{authError:{status:!1,messages:[]}});default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(l.a)(Object(l.a)({},t),{},{initialized:!0});default:return t}}}),C=Object(c.e)(M,Object(c.a)(E.a)),L=n(27),T=n.n(L),N=n(8),U=n(9),R=n(16),F=n(17),D=n(19),z=n(18),G=(n(84),n(21)),H=n.n(G),J=n(1),B=function(){return Object(J.jsxs)("nav",{className:H.a.navbar,children:[Object(J.jsx)(N.b,{to:"/profile",activeClassName:H.a.activeLink,children:"Profile"}),Object(J.jsx)(N.b,{to:"/dialogs",activeClassName:H.a.activeLink,children:"Messages"}),Object(J.jsx)(N.b,{to:"/users",activeClassName:H.a.activeLink,children:"Users"}),Object(J.jsx)(N.b,{to:"/news",activeClassName:H.a.activeLink,children:"News"}),Object(J.jsx)(N.b,{to:"/music",activeClassName:H.a.activeLink,children:"Music"}),Object(J.jsx)(N.b,{to:"/settings",activeClassName:H.a.activeLink,children:"Settings"})]})},W=n(5),Y=n(53),q=n.n(Y),K=function(t){return Object(J.jsx)("header",{className:q.a.header,children:Object(J.jsx)("div",{children:t.isAuth?Object(J.jsxs)("div",{children:[t.login," ",Object(J.jsx)("button",{onClick:t.logout,children:"Log out"})]}):Object(J.jsx)(N.b,{to:"/login",children:"Login"})})})},Z=function(t){Object(D.a)(n,t);var e=Object(z.a)(n);function n(){return Object(R.a)(this,n),e.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(J.jsx)(K,{isAuth:this.props.isAuth,login:this.props.login,logout:this.props.logout})}}]),n}(s.a.Component),Q=Object(U.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logout:function(){return function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.logout();case 2:0===t.sent.data.resultCode&&(e(k()),e(P(null,null,null,!1)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Z),V=n(20),X=function(t){var e=t.onSubmitHandler,n=t.authError;return Object(J.jsx)(V.b,{onSubmit:function(t){return e(t)},render:function(t){var e=t.handleSubmit,r=t.form;return Object(J.jsxs)("form",{onSubmit:function(){var t=Object(o.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:r.reset();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(J.jsx)("div",{children:Object(J.jsx)(V.a,{placeholder:"Email",name:"email",component:"input"})}),Object(J.jsx)("div",{children:Object(J.jsx)(V.a,{placeholder:"Password",name:"password",component:"input",type:"password"})}),Object(J.jsxs)("div",{children:[Object(J.jsx)(V.a,{type:"checkbox",name:"rememberMe",component:"input"}),Object(J.jsx)("span",{children:"Remember me"})]}),Object(J.jsx)("div",{children:Object(J.jsx)("button",{children:"Login"})}),Object(J.jsx)("div",{children:n.messages})]})}})},$=Object(U.b)((function(t){return{isAuth:t.auth.isAuth,authError:t.auth.authError}}),{login:function(t,e,n){return function(){var r=Object(o.a)(u.a.mark((function r(s){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.login(t,e,n);case 2:0===(a=r.sent).data.resultCode?(s(k()),s(_())):(s((c=a.data.messages,{type:y,errorMessages:c})),console.log(a.data.messages));case 4:case"end":return r.stop()}var c}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){var e=t.login,n=t.isAuth,r=t.authError;return n?Object(J.jsx)(W.a,{to:"/profile"}):Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{children:"Login"}),Object(J.jsx)(X,{authError:r,onSubmitHandler:function(t){e(t.email,t.password,t.rememberMe)}})]})})),tt=n(24),et=function(t){Object(D.a)(n,t);var e=Object(z.a)(n);function n(){var t;Object(R.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={editMode:!1,status:t.props.status},t.activeEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(F.a)(n,[{key:"componentDidUpdate",value:function(t,e,n){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(J.jsxs)("div",{children:[!this.state.editMode&&Object(J.jsx)("div",{children:Object(J.jsx)("span",{onDoubleClick:this.activeEditMode,children:this.props.status||"No status"})}),this.state.editMode&&Object(J.jsx)("div",{children:Object(J.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deactivateEditMode,value:this.state.status})})]})}}]),n}(s.a.Component),nt=function(t){return t.profile?Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{children:Object(J.jsx)("img",{src:t.profile.photos.large,alt:""})}),Object(J.jsx)("div",{children:Object(J.jsx)(et,{status:t.status,updateStatus:t.updateStatus})})]}):Object(J.jsx)(tt.a,{})},rt=n(54),st=n.n(rt),at=n(35),ct=n.n(at),it=function(t){return Object(J.jsxs)("div",{className:ct.a.post,children:[Object(J.jsx)("img",{src:"https://at-cdn-s02.audiotool.com/2020-12-04/users/error_/avatar256x256-31037b09db3c4089b73baef792827e1b.jpg",alt:"Avatar",className:ct.a.avatar}),Object(J.jsx)("div",{children:t.post}),Object(J.jsxs)("div",{children:["Likes: ",t.likes]})]})},ut=n(31),ot=n(48),dt=function(t){var e=t.onAddPost;return Object(J.jsx)(V.b,{onSubmit:function(t){e(t.newPost)},render:function(t){var e=t.handleSubmit,n=t.form;return Object(J.jsxs)("form",{onSubmit:function(){var t=Object(o.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(r);case 2:n.reset();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(J.jsx)("div",{children:Object(J.jsx)(V.a,{component:ot.a,name:"newPost",placeholder:"Add new post",validate:Object(ut.a)(Object(ut.b)(150))})}),Object(J.jsx)("div",{children:Object(J.jsx)("button",{children:"Send"})})]})}})},lt=Object(U.b)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(e){t(function(t){return{type:p,newPostText:t}}(e))}}}))((function(t){var e=t.posts.map((function(t){return Object(J.jsx)(it,{id:t.id,post:t.post,likes:t.likes},t.id)}));return Object(J.jsxs)("div",{className:st.a.myPosts,children:[Object(J.jsx)(dt,{onAddPost:function(e){t.addPost(e)}}),Object(J.jsx)("div",{children:e})]})})),ft=function(t){return Object(J.jsxs)("div",{children:[Object(J.jsx)(nt,{profile:t.profile,status:t.status,updateStatus:t.updateStatus}),Object(J.jsx)(lt,{})]})},pt=n(36),jt=function(t){Object(D.a)(n,t);var e=Object(z.a)(n);function n(){return Object(R.a)(this,n),e.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=this.props.loggedInUserId),this.props.getUserProfile(t),this.props.getProfileStatus(t)}},{key:"render",value:function(){return Object(J.jsx)(ft,Object(l.a)({profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateProfileStatus},this.props))}}]),n}(s.a.Component),bt=Object(c.d)(Object(U.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,loggedInUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.getProfile(t);case 2:r=e.sent,n((s=r.data,{type:b,profile:s}));case 4:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}()},getProfileStatus:function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.getStatus(t);case 2:r=e.sent,n(v(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateProfileStatus:function(t){return function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(v(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),W.f,pt.a)(jt);function ht(t){return function(e){return Object(J.jsx)(r.Suspense,{fallback:Object(J.jsx)(tt.a,{}),children:Object(J.jsx)(t,Object(l.a)({},e))})}}var Ot=s.a.lazy((function(){return n.e(3).then(n.bind(null,94)).then((function(t){return{default:t.DialogsContainer}}))})),vt=s.a.lazy((function(){return n.e(4).then(n.bind(null,93)).then((function(t){return{default:t.UsersContainer}}))})),gt=function(t){Object(D.a)(n,t);var e=Object(z.a)(n);function n(){return Object(R.a)(this,n),e.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(J.jsx)(N.a,{children:Object(J.jsxs)("div",{className:"app-wrapper",children:[Object(J.jsx)(Q,{}),Object(J.jsx)(B,{}),Object(J.jsxs)("div",{className:"app-content",children:[Object(J.jsx)(W.b,{path:"/profile/:userId?",children:Object(J.jsx)(bt,{})}),Object(J.jsx)(W.b,{path:"/dialogs",render:ht(Ot)}),Object(J.jsx)(W.b,{path:"/users",render:ht(vt)}),Object(J.jsx)(W.b,{path:"/login",children:Object(J.jsx)($,{})})]})]})}):Object(J.jsx)(tt.a,{})}}]),n}(s.a.Component),mt=Object(c.d)(Object(U.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=t(_());Promise.all([e]).then((function(){t({type:A})}))}}}))(gt);T.a.render(Object(J.jsx)(N.a,{children:Object(J.jsx)(U.a,{store:C,children:Object(J.jsx)(mt,{})})}),document.getElementById("root")),a()}},[[87,1,2]]]);
//# sourceMappingURL=main.2de5f486.chunk.js.map